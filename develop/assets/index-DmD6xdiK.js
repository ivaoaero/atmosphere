import{j as i}from"./jsx-runtime-DiklIkkE.js";import{r as n}from"./index-DRjF_FHU.js";import{c as l}from"./index-DNjz5F53.js";import{c as L}from"./index-DRtXj63t.js";import{u as k}from"./index-CB2Ck3t8.js";import{u as F}from"./index-zZ8-XE7G.js";import{c as H,R as I,A as M,C as U,a as q}from"./index-BOGxT6Z4.js";import{P as W}from"./index-CVyrcOig.js";import{P as z}from"./index-BHDKhPUC.js";import{D as B}from"./index-BCnQyZYr.js";import{a as V}from"./styles-Dj5kSLHa.js";var b,w="HoverCard",[y,fe]=L(w,[H]),S=H(),[$,E]=y(w),O=e=>{const{__scopeHoverCard:r,children:t,open:s,defaultOpen:a,onOpenChange:c,openDelay:u=700,closeDelay:p=300}=e,d=S(r),v=n.useRef(0),f=n.useRef(0),C=n.useRef(!1),m=n.useRef(!1),[h=!1,o]=k({prop:s,defaultProp:a,onChange:c}),x=n.useCallback(()=>{clearTimeout(f.current),v.current=window.setTimeout(()=>o(!0),u)},[u,o]),P=n.useCallback(()=>{clearTimeout(v.current),!C.current&&!m.current&&(f.current=window.setTimeout(()=>o(!1),p))},[p,o]),j=n.useCallback(()=>o(!1),[o]);return n.useEffect(()=>()=>{clearTimeout(v.current),clearTimeout(f.current)},[]),i.jsx($,{scope:r,open:h,onOpenChange:o,onOpen:x,onClose:P,onDismiss:j,hasSelectionRef:C,isPointerDownOnContentRef:m,children:i.jsx(I,{...d,children:t})})};O.displayName=w;var N="HoverCardTrigger",_=n.forwardRef((e,r)=>{const{__scopeHoverCard:t,...s}=e,a=E(N,t),c=S(t);return i.jsx(M,{asChild:!0,...c,children:i.jsx(z.a,{"data-state":a.open?"open":"closed",...s,ref:r,onPointerEnter:l(e.onPointerEnter,R(a.onOpen)),onPointerLeave:l(e.onPointerLeave,R(a.onClose)),onFocus:l(e.onFocus,a.onOpen),onBlur:l(e.onBlur,a.onClose),onTouchStart:l(e.onTouchStart,u=>u.preventDefault())})})});_.displayName=N;var G="HoverCardPortal",[me,K]=y(G,{forceMount:void 0}),g="HoverCardContent",D=n.forwardRef((e,r)=>{const t=K(g,e.__scopeHoverCard),{forceMount:s=t.forceMount,...a}=e,c=E(g,e.__scopeHoverCard);return i.jsx(W,{present:s||c.open,children:i.jsx(J,{"data-state":c.open?"open":"closed",...a,onPointerEnter:l(e.onPointerEnter,R(c.onOpen)),onPointerLeave:l(e.onPointerLeave,R(c.onClose)),ref:r})})});D.displayName=g;var J=n.forwardRef((e,r)=>{const{__scopeHoverCard:t,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:c,onInteractOutside:u,...p}=e,d=E(g,t),v=S(t),f=n.useRef(null),C=F(r,f),[m,h]=n.useState(!1);return n.useEffect(()=>{if(m){const o=document.body;return b=o.style.userSelect||o.style.webkitUserSelect,o.style.userSelect="none",o.style.webkitUserSelect="none",()=>{o.style.userSelect=b,o.style.webkitUserSelect=b}}},[m]),n.useEffect(()=>{if(f.current){const o=()=>{h(!1),d.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var P;((P=document.getSelection())==null?void 0:P.toString())!==""&&(d.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",o),()=>{document.removeEventListener("pointerup",o),d.hasSelectionRef.current=!1,d.isPointerDownOnContentRef.current=!1}}},[d.isPointerDownOnContentRef,d.hasSelectionRef]),n.useEffect(()=>{f.current&&Y(f.current).forEach(x=>x.setAttribute("tabindex","-1"))}),i.jsx(B,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:l(c,o=>{o.preventDefault()}),onDismiss:d.onDismiss,children:i.jsx(U,{...v,...p,onPointerDown:l(p.onPointerDown,o=>{o.currentTarget.contains(o.target)&&h(!0),d.hasSelectionRef.current=!1,d.isPointerDownOnContentRef.current=!0}),ref:C,style:{...p.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),Q="HoverCardArrow",X=n.forwardRef((e,r)=>{const{__scopeHoverCard:t,...s}=e,a=S(t);return i.jsx(q,{...a,...s,ref:r})});X.displayName=Q;function R(e){return r=>r.pointerType==="touch"?void 0:e()}function Y(e){const r=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)r.push(t.currentNode);return r}var Z=O,ee=_,A=D;const T=n.forwardRef(({className:e,align:r="center",sideOffset:t=4,...s},a)=>i.jsx(A,{ref:a,align:r,sideOffset:t,className:V("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));T.displayName=A.displayName;T.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:"'center'",computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};const oe=({trigger:e,triggerAsChild:r,children:t,side:s,sideOffset:a,align:c,alignOffset:u,...p})=>i.jsxs(Z,{...p,children:[i.jsx(ee,{asChild:r,children:e}),i.jsx(T,{side:s,sideOffset:a,align:c,alignOffset:u,children:t})]});oe.__docgenInfo={description:"",methods:[],displayName:"HoverCard",props:{trigger:{required:!0,tsType:{name:"ReactNode"},description:""},triggerAsChild:{required:!1,tsType:{name:"boolean"},description:""}},composes:["ComponentProps","Pick"]};export{oe as H};
